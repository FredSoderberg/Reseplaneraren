<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>IOOPM Travel Planner: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IOOPM Travel Planner
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Notera att denna fil kommer att uppdateras med tips på mål etc. Jag ruschar ut den nu så att ingen blockerar på den. Med reservationer för eventuella ändringar, alltså. Det kommer också att komma fler tips och mer hjälp. /Tobias</b></p>
<h1>Reseplanerare 1.0</h1>
<p>Reseplaneraren syftar till dels att visa ett bra exempel på C-kod för ett större program som ledning för framtiden, men också till att ge er möjligheten att se litet grand av logiken bakom system som ni säkerligen har använt.</p>
<p>Uppgiften går ut på att vidareutveckla ett halvfärdigt system till en fungerande reseplanerare. I den kod ni får ut finns stöd för:</p>
<ul>
<li><a href="graph.h">graph.h</a> &ndash; ett generellt grafbibliotek</li>
<li><a href="list.h">list.h</a> &ndash; ett generellt listbibliotek</li>
<li><a href="network.h">network.h</a> &ndash; ett lager ovapå grafbiblioteket som vet något om resor</li>
</ul>
<p>När man just nu kör systemet går det in i en loop som frågar varifrån man vill åka och vart. Du kan se en lista över platser som finns i systemet i <a href="data.txt">data.txt</a>. Notera att ÅÄÖ har ersatts av AAO.</p>
<p>Här är ett exempel på en interaktion med programmet (input markerad för tydlighets skull):</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;================================</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; Welcome to the travel planner!</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;================================</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;What is your starting station?</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Stora Torget &lt;-- input</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;Where would you like to go?</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;Vaksala torg &lt;-- input</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;adding duration to travel@0x7faabbd018c0: 4</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;adding duration to travel@0x7faabbd018e0: 9</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;adding duration to travel@0x7faabbd01950: 4</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;@ -1: #41 Stora Torget --(4)--&gt; Kungsgardets center</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;@ -1: #22 Kungsgardets center --(9)--&gt; Centralstationen</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;@ -1: #10 Centralstationen --(4)--&gt; Vaksala torg</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;What is your starting station?</div>
</div><!-- fragment --><p>Programmet fortsätter att köra tills du trycker enter som svar på frågan "Where would you like to go".</p>
<p>Logiken i programmet just nu använder antalet hållplatser på resan för att avgöra vilken resa som är bäst. Det betyder att en resa som passerar 11 hållplatser alltid är bättre än en som passerar 12, även om den första innhåller 4 bussbyten och den sista inget.</p>
<p>Uppgiften går ut på att ändra på denna dumhet och istället använda restiden som ett mått. Det blir dock problematiskt med bussbyten eftersom man måste räkna ut när nästa buss går från varje hållplats.</p>
<h2>Steg 1: Generera tidtabeller</h2>
<p>Grafen just nu är en massa noder (som motsvarar stationer) och bågar (sträcker mellan stationerna). Bågarna (edge på engelska) har vikter som avser hur lång tid det tar att åka sträckan. Vi har en fil <a href="start.txt">start.txt</a> som innehåller alla bussars avgångstid från sina ändhållplatser. Givet denna information kan vi fylla i tidtabeller för alla hållplatser för alla bussar enligt denna enkla algoritm:</p>
<ul>
<li>For every bus line L in the data<ul>
<li>For every trip T that L does, with starting time ST and starting and ending positions SP and EP<ul>
<li>Walk the graph from SP to EP, adding an entry for L with ST plus the accumulated time it took to get there</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Skapa en tidtabellsstruktur som avser en viss buss, samt vilka tiden den är vid en viss hållplats, samt i vilken riktning bussen åker (kan t.ex. göras med hjälp av namnet på stationen man kommer från eller skall till). Fyll i den med hjälp av ovanstående.</p>
<p>Du kan antingen spara tidtabeller i varje nod i grafen, eller varför inte som ett binärt sökträd utanför grafen där nycklarna är stationsnamn och datat är en lista över alla hålltider.</p>
<h2>Steg 2: Ändra så att planeraren använder hållplatstider istället för antal hållplatser.</h2>
<p>Reseplaneraren använder Dijkstras algoritm för grafsökning. Den tittar på kortaste sträckan vidare, men tar inte bytestid med i beräkningen. Låt T vara den tid som vi anlöper hållplats H1. Vi vill vidare till H2 och det finns två bussar &ndash; B1 och B2. B1 är den vi sitter på &ndash; då är "kostnaden" för att åka från H1 till H2 med B1 just den vikt V som står på bågen mellan noderna (så långt är allt oförändrat). För B2 måste vi dock slå upp i tidtabellen när närmaste avgång är. Om den är vid tiden T', så kan vi räkna ut "kostnaden" att åka H1 till H2 med B2 som T' - T + V.</p>
<p>Efter denna förändring kommer alltså reseplaneraren att jämföra två resor med avseende på tiden de tar, inklusive byten och väntan.</p>
<p>Du kan se nedan under Styck 5 ett exempel på hur denna information skall användas i programmet.</p>
<p>Ett enkelt sätt att åstadkomma denna förändring är genom att använda en <a href="http://c.learncodethehardway.org/book/ex18.html">funktionspekare</a>.</p>
<h2>Steg 3: Fixa minnesläckage</h2>
<p>Det finns minnesläckage i programmet. De skall åtgärdas!</p>
<h2>Steg 4: Dokumentation</h2>
<p>Det finns dokumentation i programmet. Alla nya funktioner och alla förändringar måste speglas i dokumentationen.</p>
<p><b>Notera att <code>make doc</code> genererar HTML-dokumentation som du kan läsa!</b></p>
<h2>Steg 5: Ta bort skräputskrifter, etc.</h2>
<ul>
<li>Programmet skriver ut en massa dumheter. Ta bort dem.</li>
<li>Programmet kraschar om man frågar efter noder som inte finns. Fixa det (på lämpligt sätt).</li>
<li>Programmet skall inte krascha om indatafilerna innehåller dumheter (det får avslutas eller ignorera input)</li>
</ul>
<p>Det skall gå att köra programmet så här:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./travel --from Polacksbacken --to &quot;Uppsala C&quot; --start 15:30 </div>
</div><!-- fragment --><p>för att få fram snabbaste resvägen från Polacksbacken till Uppsala C som avgår 15:30. Programmet skall titta på den närmaste avgången efter 15:30 och använda det som <em>senaste tillåtna ankomsttid</em>. Programmet skall titta på alla bussar som avgår mellan starttid och senaste ankomsttid från Polacksbacken (i detta exempel) för att hitta den som har kortaste resväg i minuter.</p>
<h1>Tester</h1>
<p>Du uppmanas å det starkaste att lägga till tester för allt du skriver! Det är inte (ännu) ett krav, men det kommer att hjälpa dig! Använd också programmets tester för regressionstester! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 15 2015 16:27:46 for IOOPM Travel Planner by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
